<html>


<head>
<!-- To do : add HTML for switching between which of the three classes that the configuration / simulation buttons apply to  -->
</head>
<body>

<!-- To do : Change header info  -->
<h1 id="myHeader"> This is an AJAX example</h1>
<p> This code describes how to do an AJAX example </p>
<p id="thispart"> This is the part that is updated </p>
<p> It cleverly updates only part of a web page </p>

<!-- To do : Create radio buttons for selecting student configuration options -->
<!-- To do : Create drop down menu for selecting current classroom  -->

<form action = "index.php">
    <button type = "button"  id="Enter1">
        Student Enter Rect 1
        </button>
        <button type = "button"  id="Enter2">
        Student Enter Rect 2
        </button>
        <button type = "button"  id="Enter3">
        Student Enter Rect 3
        </button>
        <button type = "button"  id="Enter4">
        Student Enter Rect 4
        </button>
        <button type = "button"  id="Enter5">
        Student Enter Rect 5
        </button>
        <button type = "button"  id="Exit1">
        Student Exit Rect 1
        </button>
        <button type = "button"  id="Exit2">
        Student Exit Rect 2
        </button>
        <button type = "button"  id="Exit3">
        Student Exit Rect 3
        </button>
        <button type = "button"  id="Exit4">
        Student Exit Rect 4
        </button>
        <button type = "button"  id="Exit5">
        Student Exit Rect 5
        </button>
        <button type = "button"  id="EnterQ">
        Student Enter Question Rect
        </button>
        <button type = "button"  id="ExitQ">
        Student Exit Question Rect
        </button>
        <button type = "button"  id="EnterI">
        Instructor Enter 
        </button>
        <button type = "button"  id="ExitI">
          Instructor Exit
        </button>  

</form>
<ul id="myList"></ul>

<!-- To do : Add buttons for instructor actions , question asking , class beginning and ending  -->

<script type = "text/javascript">

    class1 = {
<<<<<<< HEAD
        instructorHasEntered : "coolwhip",
        studentInRect1 : {data: false},
        studentInRect2 : false,
        studentInRect3 : false,
        studentInRect4 : false,
        studentInRect5 : false,
        studentInRectQ : false
=======
        number : 1,
        instructorHasEntered : {data: 0},
        studentInRect1 : {data: 0},
        studentInRect2 : {data: 0},
        studentInRect3 : {data: 0},
        studentInRect4 : {data: 0},
        studentInRect5 : {data: 0},
        studentInRectQ : {data: 0}
>>>>>>> tb2
    }
    class2 = {
        number : 2,
        instructorHasEntered : {data: 0},
        studentInRect1 : {data: 0},
        studentInRect2 : {data: 0},
        studentInRect3 : {data: 0},
        studentInRect4 : {data: 0},
        studentInRect5 : {data: 0},
        studentInRectQ : {data: 0}
    }
    class3 = {
        number : 3,
        instructorHasEntered : {data: 0},
        studentInRect1 : {data: 0},
        studentInRect2 : {data: 0},
        studentInRect3 : {data: 0},
        studentInRect4 : {data: 0},
        studentInRect5 : {data: 0},
        studentInRectQ : {data: 0}
    }
    
    // To do : Link drop down menu configuration options to set this variable
    currentClass = class1;

    // To do : Link radio button configuration options to set these variables 
    currentStudentWipesUponEntry = true;
    currentStudentWipesUponExit = true;
    currentStudentSanitizesUponExit = true;
    currentStudentIsWearingMask = true;
    
    // To do : for each function , include in PHP request the related boolean currentClass variables ( e.g. currentClass. studentInRect1 for studentEnterRect1() )
    // To do : for each function , include in PHP request the related boolean currentStudent variables ( e.g. currentStudentWipesUponEntry for studentEnterRect1(), currentStudentSanitizesUponExit for studentExitRect1(), etc. )

    // NOTE ON PARAMETER NAMES:
    // b_ for boolean value
    function sensorCheck(classNum, currentStudent, b_StudentOrTeacher, b_DeskOrNot, b_EntryOrExit) {
        request = new XMLHttpRequest();
        request.onreadystatechange = function () {
          if (request.readyState == 4)
              my_callback(currentStudent);
        }
        request.open("GET","index.php?occupied="+currentStudent.data+"&StudentOrTeacher="+b_StudentOrTeacher+"&DeskOrNot="+b_DeskOrNot+"&EntryOrExit="+b_EntryOrExit);
        request.send();
    }

// order of parameters:
// ,b_StudentOrTeacher, b_DeskOrNot, b_EntryOrExit

    document.getElementById ("Enter1").addEventListener ("click", () => sensorCheck(currentClass.number, currentClass.studentInRect1, 0, 0, 0))
    document.getElementById ("Enter2").addEventListener ("click", () => sensorCheck(currentClass.number, currentClass.studentInRect2, 0, 0, 0))
    document.getElementById ("Enter3").addEventListener ("click", () => sensorCheck(currentClass.number, currentClass.studentInRect3, 0, 0, 0))
    document.getElementById ("Enter4").addEventListener ("click", () => sensorCheck(currentClass.studentInRect4, 0, 0, 0))
    document.getElementById ("Enter5").addEventListener ("click", () => sensorCheck(currentClass.number, currentClass.studentInRect5, 0, 0, 0))
    document.getElementById ("Exit1").addEventListener ("click", () => sensorCheck(currentClass.number, currentClass.studentInRect1, 0, 0, 1))
    document.getElementById ("Exit2").addEventListener ("click", () => sensorCheck(currentClass.studentInRect2, 0, 0, 1))
    document.getElementById ("Exit3").addEventListener ("click", () => sensorCheck(currentClass.number, currentClass.studentInRect3, 0, 0, 1))
    document.getElementById ("Exit4").addEventListener ("click", () => sensorCheck(currentClass.number, currentClass.studentInRect4, 0, 0, 1))
    document.getElementById ("Exit5").addEventListener ("click", () => sensorCheck(currentClass.number, currentClass.studentInRect5, 0, 0, 1))

// Instructor and question rectangles 
    document.getElementById ("EnterQ").addEventListener ("click", () => sensorCheck(currentClass.number, currentClass.studentInRect2, 0, 1, 0))
    document.getElementById ("ExitQ").addEventListener ("click", () => sensorCheck(currentClass.number, currentClass.studentInRect3, 0, 1, 1))
    document.getElementById ("EnterI").addEventListener ("click", () => sensorCheck(currentClass.number, currentClass.studentInRect4, 1, 0, 0))
    document.getElementById ("ExitI").addEventListener ("click", () => sensorCheck(currentClass.number, currentClass.studentInRect5, 1, 0, 1))    
    
// EnterQ
// ExitQ
// EnterI
// ExitI

<<<<<<< HEAD
      request = new XMLHttpRequest();
      request.open("GET","index.php?occupied="+peppy.data);
    
      request.onreadystatechange = function () {
         if (request.readyState == 4)
             my_callback(peppy);
    
       }
      request.send();
    
    }
    
    function studentEnterRect2() {
      request = new XMLHttpRequest();
      request.open("GET","index.php");
    
      request.onreadystatechange = function () {
         if (request.readyState == 4)
             my_callback();
    
       }
      request.send();
    
    }
    
    
    function studentEnterRect3() {
      request = new XMLHttpRequest();
      request.open("GET","index.php");
    
      request.onreadystatechange = function () {
         if (request.readyState == 4)
             my_callback();
    
       }
      request.send();
    
    }
    
    
    function studentEnterRect4() {
      request = new XMLHttpRequest();
      request.open("GET","index.php");
    
      request.onreadystatechange = function () {
         if (request.readyState == 4)
             my_callback();
    
       }
      request.send();
    
    }
    
    
    function studentEnterRect5() {
      request = new XMLHttpRequest();
      request.open("GET","index.php");
    
      request.onreadystatechange = function () {
         if (request.readyState == 4)
             my_callback();
    
       }
      request.send();
    
    }
    
    
    function studentExitRect1() {
      request = new XMLHttpRequest();
      request.open("GET","index.php");
    
      request.onreadystatechange = function () {
         if (request.readyState == 4)
             my_callback();
    
       }
      request.send();
    
    }
    
    
    function studentExitRect2() {
      request = new XMLHttpRequest();
      request.open("GET","index.php");
    
      request.onreadystatechange = function () {
         if (request.readyState == 4)
             my_callback();
    
       }
      request.send();
    
    }
    
    
    function studentExitRect3() {
      request = new XMLHttpRequest();
      request.open("GET","index.php");
    
      request.onreadystatechange = function () {
         if (request.readyState == 4)
             my_callback();
    
       }
      request.send();
    
    }
    
    
    function studentExitRect4() {
      request = new XMLHttpRequest();
      request.open("GET","index.php");
    
      request.onreadystatechange = function () {
         if (request.readyState == 4)
             my_callback();
    
       }
      request.send();
    
    }
    
    
    function studentExitRect5() {
      request = new XMLHttpRequest();
      request.open("GET","index.php");
    
      request.onreadystatechange = function () {
         if (request.readyState == 4)
             my_callback();
    
       }
      request.send();
    
    }

    function sensorCheck(currentStudent) {

      request = new XMLHttpRequest();
      request.open("GET","index.php?occupied="+given.data);

      request.onreadystatechange = function () {
        if (request.readyState == 4)
            my_callback(given);

      }
      request.send();
    
    }

//  document.getElementById ("Enter1").addEventListener ("click", () => generic(currentClass.studentInRect1))
//  document.getElementById ("Enter2").addEventListener ("click", studentEnterRect2)
//  document.getElementById ("Enter3").addEventListener ("click", studentEnterRect3)
//  document.getElementById ("Enter4").addEventListener ("click", studentEnterRect4)
//  document.getElementById ("Enter5").addEventListener ("click", studentEnterRect5)
//  document.getElementById ("Exit1").addEventListener ("click", studentExitRect1)
//  document.getElementById ("Exit2").addEventListener ("click", studentExitRect2)
//  document.getElementById ("Exit3").addEventListener ("click", studentExitRect3)
//  document.getElementById ("Exit4").addEventListener ("click", studentExitRect4)
//  document.getElementById ("Exit5").addEventListener ("click", studentExitRect5)
 document.getElementById ("Enter1").addEventListener ("click", () => sensorCheck(studentInRect1))
 document.getElementById ("Enter2").addEventListener ("click", () => sensorCheck(studentInRect2))
 document.getElementById ("Enter3").addEventListener ("click", () => sensorCheck(studentInRect3))
 document.getElementById ("Enter4").addEventListener ("click", () => sensorCheck(studentInRect4))
 document.getElementById ("Enter5").addEventListener ("click", () => sensorCheck(studentInRect5))
 document.getElementById ("Leave1").addEventListener ("click", () => sensorCheck(studentInRect1))
 document.getElementById ("Leave2").addEventListener ("click", () => sensorCheck(studentInRect2))
 document.getElementById ("Leave3").addEventListener ("click", () => sensorCheck(studentInRect3))
 document.getElementById ("Leave4").addEventListener ("click", () => sensorCheck(studentInRect4))
 document.getElementById ("Leave5").addEventListener ("click", () => sensorCheck(studentInRect5))


    function my_callback(toSet) {
        if (request.status == 200) {
    console.log("Request successful ");
    console.log(toSet.data);
    console.log(currentClass.instructorHasEntered);


        toSet.data = true;
    console.log(currentClass.studentInRect1.data);
=======
    function my_callback(toSet) {
        if (request.status == 200) {
          console.log("Request successful ");
>>>>>>> tb2

          var node = document.createElement("LI");               
          var textnode = document.createTextNode(request.responseText);      
          node.appendChild(textnode);                            
          document.getElementById("myList").appendChild(node);    
          toSet.data = 1;

        }
        else if (request.status=404) {
          alert("Server was not found: data returned is :\n"+request.responseText);
    
        }
    
    }
    
    </script>


</body>
</html>
